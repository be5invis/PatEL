var s2_atom,s2_Scope,s2_prim,s2_ex;s2_atom=require('../commons/match').atom,s2_Scope=require('patrisika').Scope,s2_prim=require('../commons/match').prim,s2_ex=function(f,c){var f,c,i,b,g,p,e,h,d,o,l,m,k,j,a,n;if(a=f,a instanceof Array&&a.length>=1&&a[0]==='.quote')return e=a.slice(1),f;else if(a instanceof Array&&a.length>=1&&a[0]==='.id')return e=a.slice(1),f;else if(a instanceof Array&&a.length===3&&a[0]==='.lambda'&&a[1]instanceof Array&&a[1].length>=0){d=a[1].slice(0),k=a[2],g=new s2_Scope(c),b=0;while(b<d.length)g.declare(d[b],!0),d[b]=g.use(d[b]),b+=1;return['.lambda.scoped',d,s2_ex(k,g),g]}else if(a instanceof Array&&a.length>=3&&a[0]==='.beta'&&a[1]instanceof Array&&a[1].length>=0){d=a[1].slice(0),k=a[2],j=a.slice(3),g=new s2_Scope(c),b=0;while(b<d.length)g.declare(d[b],!0),d[b]=g.use(d[b]),b+=1;b=0;while(b<j.length)j[b]=s2_ex(j[b],c),b+=1;return['.beta.scoped',d,s2_ex(k,g),g,j]}else if(a instanceof Array&&a.length===4&&a[0]==='.try'&&a[2]instanceof Array&&a[2].length===1)return o=a[1],l=a[2][0],m=a[3],c.declare(l),['.try',s2_ex(o,c),c.use(l),s2_ex(m,c)];else if(a instanceof Array&&a.length>=1&&a[0]==='.hash'){d=a.slice(1),i=['.hash'],b=1;while(b<f.length)i[b]=[f[b][0],s2_ex(f[b][1],c)],b+=1;return i}else if(a instanceof Array&&a.length===2&&a[0]==='.local')return e=a[1],c.declare(e),c.use(e);else if(a instanceof Array&&a.length>=1){if(h=a[0],d=a.slice(1),s2_atom(h)&&c.macros.has(h))return c.macros.get(h)(s2_ex,f,c);s2_prim(h)?n=void 0:n=h=s2_ex(h,c),i=[h],b=1;while(b<f.length)i[b]=s2_ex(f[b],c),b+=1;return i}else return e=a,s2_prim(e)?e:(e=a,s2_atom(e)?c.use(e):(p=a,p))},exports.pass=function(a,b){var a,b;return s2_ex(a,b)}